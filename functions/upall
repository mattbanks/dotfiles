#!/bin/bash

# Master update script - updates all package managers
update-all() {
    echo "ğŸš€ Updating all package managers..."
    echo ""

    # Update Homebrew
    echo "ğŸº Updating Homebrew..."
    brew bump
    if [ $? -ne 0 ]; then
        echo "âš ï¸  Homebrew update failed"
    fi

    echo ""

    # Update znap
    echo "âš¡ Updating znap..."
    znap pull
    if [ $? -ne 0 ]; then
        echo "âš ï¸  znap update failed"
    fi

    echo ""

    # Update npm global packages
    npmupg
    if [ $? -ne 0 ]; then
        echo "âš ï¸  npm global update failed"
    fi

    echo ""

    # Update Claude CLI
    if command -v claude &> /dev/null; then
        echo "ğŸ¤– Updating Claude CLI..."
        claude update
        if [ $? -ne 0 ]; then
            echo "âš ï¸  Claude CLI update failed"
        fi
    else
        echo "â­ï¸  Skipping Claude CLI (not installed)"
    fi

    echo ""
    echo "ğŸ‰ All updates complete!"
}

# Always execute the function when script is run
update-all "$@"
